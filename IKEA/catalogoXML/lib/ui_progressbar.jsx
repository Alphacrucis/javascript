function pbar(title, message, max) {    var wnd = new Window('palette', title);    wnd.message = wnd.add('statictext', undefined, message);    wnd.message.preferredSize = [300, 30];    wnd.pgBar = wnd.add('progressbar');    wnd.pgBar.preferredSize = [300, 30];    wnd.pgBar.maxvalue = max;        wnd.step = function(msg) {        this.value++;        wnd.display(msg);	};    wnd.display = function(msg) {        var f = false;        if (!app.scriptPreferences.enableRedraw)            { app.scriptPreferences.enableRedraw = true; f = true; }                    wnd.hide();         if (msg) {            wnd.message.text = msg;        }        wnd.show();                if (f) app.scriptPreferences.enableRedraw = false;    };            return wnd;}